{"version":3,"mappings":"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","names":["e","webpackEmptyAsyncContext","module","_angular_core__WEBPACK_IMPORTED_MODULE_3__","AppComponent","formBuilder","editService","sort","skip","take","view","pipe","data","gridState","read","state","sender","rowIndex","columnIndex","dataItem","isEdited","editCell","createFormGroup","args","formGroup","valid","preventDefault","dirty","assignValues","value","update","addRow","_model__WEBPACK_IMPORTED_MODULE_1__","closeRow","create","remove","cancelCell","grid","closeCell","saveChanges","cancelChanges","group","ProductID","ProductName","_angular_forms__WEBPACK_IMPORTED_MODULE_5__","UnitPrice","UnitsInStock","Discontinued","selectors","decls","vars","consts","template","ctx","AppModule","bootstrap","_app_component__WEBPACK_IMPORTED_MODULE_0__","_edit_service__WEBPACK_IMPORTED_MODULE_1__","imports","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__","_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_4__","_progress_kendo_angular_grid__WEBPACK_IMPORTED_MODULE_6__","_progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_7__","_progress_kendo_angular_dialog__WEBPACK_IMPORTED_MODULE_8__","_angular_common_http__WEBPACK_IMPORTED_MODULE_9__","declarations","CREATE_ACTION","UPDATE_ACTION","REMOVE_ACTION","itemIndex","item","idx","length","cloneData","map","Object","assign","EditService","http","fetch","subscribe","originalData","createdItems","push","unshift","isNew","index","updatedItems","splice","indexOf","deletedItems","Boolean","hasChanges","completed","reset","target","source","action","jsonp","serializeModels","res","JSON","stringify","rxjs__WEBPACK_IMPORTED_MODULE_0__","factory","Product","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__","bootstrapModule","_app_app_module__WEBPACK_IMPORTED_MODULE_1__","preserveWhitespaces","then","window","destroy","ref","console","error","err","Element","prototype","matches","msMatchesSelector"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/edit.service.ts","webpack:///src/app/model.ts","webpack:///src/main.ts","webpack:///src/polyfills.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { Observable } from 'rxjs';\r\nimport { Component, OnInit, Inject } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\nimport { GridDataResult } from '@progress/kendo-angular-grid';\r\nimport { State, process } from '@progress/kendo-data-query';\r\n\r\nimport { Product } from './model';\r\nimport { EditService } from './edit.service';\r\n\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'my-app',\r\n  template: `\r\n      <kendo-grid #grid\r\n          [data]=\"view | async\"\r\n          [height]=\"533\"\r\n          [pageSize]=\"gridState.take\" [skip]=\"gridState.skip\" [sort]=\"gridState.sort\"\r\n          [pageable]=\"true\" [sortable]=\"true\"\r\n          (dataStateChange)=\"onStateChange($event)\"\r\n          (cellClick)=\"cellClickHandler($event)\"\r\n          (cellClose)=\"cellCloseHandler($event)\"\r\n          (cancel)=\"cancelHandler($event)\"\r\n          (save)=\"saveHandler($event)\"\r\n          (remove)=\"removeHandler($event)\"\r\n          (add)=\"addHandler($event)\"\r\n          [navigable]=\"true\"\r\n        >\r\n        <ng-template kendoGridToolbarTemplate>\r\n            <button kendoGridAddCommand>Add new</button>\r\n            <button class='k-button' [disabled]=\"!editService.hasChanges()\" (click)=\"saveChanges(grid);\">Save Changes</button>\r\n            <button class='k-button' [disabled]=\"!editService.hasChanges()\" (click)=\"cancelChanges(grid);\">Cancel Changes</button>\r\n        </ng-template>\r\n        <kendo-grid-column field=\"ProductName\" title=\"Product Name\"></kendo-grid-column>\r\n        <kendo-grid-column field=\"UnitPrice\" editor=\"numeric\" title=\"Price\"></kendo-grid-column>\r\n        <kendo-grid-column field=\"Discontinued\" editor=\"boolean\" title=\"Discontinued\"></kendo-grid-column>\r\n        <kendo-grid-column field=\"UnitsInStock\" editor=\"numeric\" title=\"Units In Stock\"></kendo-grid-column>\r\n        <kendo-grid-command-column title=\"command\" width=\"220\">\r\n            <ng-template kendoGridCellTemplate let-isNew=\"isNew\">\r\n                <button kendoGridRemoveCommand>Remove</button>\r\n                <button kendoGridSaveCommand>Add</button>\r\n                <button kendoGridCancelCommand>Cancel</button>\r\n            </ng-template>\r\n        </kendo-grid-command-column>\r\n      </kendo-grid>\r\n  `\r\n})\r\nexport class AppComponent implements OnInit {\r\n    public view: Observable<GridDataResult>;\r\n    public gridState: State = {\r\n        sort: [],\r\n        skip: 0,\r\n        take: 10\r\n    };\r\n\r\n    public changes: any = {};\r\n\r\n    constructor(private formBuilder: FormBuilder, public editService: EditService) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        this.view = this.editService.pipe(map(data => process(data, this.gridState)));\r\n\r\n        this.editService.read();\r\n    }\r\n\r\n    public onStateChange(state: State) {\r\n        this.gridState = state;\r\n\r\n        this.editService.read();\r\n    }\r\n\r\n    public cellClickHandler({ sender, rowIndex, columnIndex, dataItem, isEdited }) {\r\n        if (!isEdited) {\r\n            sender.editCell(rowIndex, columnIndex, this.createFormGroup(dataItem));\r\n        }\r\n    }\r\n\r\n    public cellCloseHandler(args: any) {\r\n        const { formGroup, dataItem } = args;\r\n\r\n        if (!formGroup.valid) {\r\n             // prevent closing the edited cell if there are invalid values.\r\n            args.preventDefault();\r\n        } else if (formGroup.dirty) {\r\n            this.editService.assignValues(dataItem, formGroup.value);\r\n            this.editService.update(dataItem);\r\n        }\r\n    }\r\n\r\n    public addHandler({ sender }) {\r\n        sender.addRow(this.createFormGroup(new Product()));\r\n    }\r\n\r\n    public cancelHandler({ sender, rowIndex }) {\r\n        sender.closeRow(rowIndex);\r\n    }\r\n\r\n    public saveHandler({ sender, formGroup, rowIndex }) {\r\n        if (formGroup.valid) {\r\n            this.editService.create(formGroup.value);\r\n            sender.closeRow(rowIndex);\r\n        }\r\n    }\r\n\r\n    public removeHandler({ sender, dataItem }) {\r\n        this.editService.remove(dataItem);\r\n\r\n        sender.cancelCell();\r\n    }\r\n\r\n    public saveChanges(grid: any): void {\r\n        grid.closeCell();\r\n        grid.cancelCell();\r\n\r\n        this.editService.saveChanges();\r\n    }\r\n\r\n    public cancelChanges(grid: any): void {\r\n        grid.cancelCell();\r\n\r\n        this.editService.cancelChanges();\r\n    }\r\n\r\n    public createFormGroup(dataItem: any): FormGroup {\r\n        return this.formBuilder.group({\r\n            'ProductID': dataItem.ProductID,\r\n            'ProductName': [dataItem.ProductName, Validators.required],\r\n            'UnitPrice': dataItem.UnitPrice,\r\n            'UnitsInStock': [dataItem.UnitsInStock, Validators.compose([Validators.required, Validators.pattern('^[0-9]{1,3}')])],\r\n            'Discontinued': dataItem.Discontinued\r\n        });\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule, HttpClientJsonpModule } from '@angular/common/http';\r\n\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { DropDownsModule } from '@progress/kendo-angular-dropdowns';\r\nimport { DialogModule } from '@progress/kendo-angular-dialog';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { EditService } from './edit.service';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        BrowserAnimationsModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        GridModule,\r\n        DropDownsModule,\r\n        DialogModule,\r\n        HttpClientModule,\r\n        HttpClientJsonpModule\r\n    ],\r\n    bootstrap: [AppComponent],\r\n    providers: [EditService]\r\n})\r\nexport class AppModule {}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, zip } from 'rxjs';\r\n\r\nimport { map } from 'rxjs/operators';\r\n\r\nconst CREATE_ACTION = 'create';\r\nconst UPDATE_ACTION = 'update';\r\nconst REMOVE_ACTION = 'destroy';\r\n\r\nconst itemIndex = (item: any, data: any[]): number => {\r\n    for (let idx = 0; idx < data.length; idx++) {\r\n        if (data[idx].ProductID === item.ProductID) {\r\n            return idx;\r\n        }\r\n    }\r\n\r\n    return -1;\r\n};\r\n\r\nconst cloneData = (data: any[]) => data.map(item => Object.assign({}, item));\r\n\r\n@Injectable()\r\nexport class EditService extends BehaviorSubject<any[]> {\r\n    private data: any[] = [];\r\n    private originalData: any[] = [];\r\n    private createdItems: any[] = [];\r\n    private updatedItems: any[] = [];\r\n    private deletedItems: any[] = [];\r\n\r\n    constructor(private http: HttpClient) {\r\n        super([]);\r\n    }\r\n\r\n    public read() {\r\n        if (this.data.length) {\r\n            return super.next(this.data);\r\n        }\r\n\r\n        this.fetch()\r\n            .subscribe(data => {\r\n                this.data = data;\r\n                this.originalData = cloneData(data);\r\n                super.next(data);\r\n            });\r\n    }\r\n\r\n    public create(item: any): void {\r\n        this.createdItems.push(item);\r\n        this.data.unshift(item);\r\n\r\n        super.next(this.data);\r\n    }\r\n\r\n    public update(item: any): void {\r\n        if (!this.isNew(item)) {\r\n            const index = itemIndex(item, this.updatedItems);\r\n            if (index !== -1) {\r\n                this.updatedItems.splice(index, 1, item);\r\n            } else {\r\n                this.updatedItems.push(item);\r\n            }\r\n        } else {\r\n            const index = this.createdItems.indexOf(item);\r\n            this.createdItems.splice(index, 1, item);\r\n        }\r\n    }\r\n\r\n    public remove(item: any): void {\r\n        let index = itemIndex(item, this.data);\r\n        this.data.splice(index, 1);\r\n\r\n        index = itemIndex(item, this.createdItems);\r\n        if (index >= 0) {\r\n            this.createdItems.splice(index, 1);\r\n        } else {\r\n            this.deletedItems.push(item);\r\n        }\r\n\r\n        index = itemIndex(item, this.updatedItems);\r\n        if (index >= 0) {\r\n            this.updatedItems.splice(index, 1);\r\n        }\r\n\r\n        super.next(this.data);\r\n    }\r\n\r\n    public isNew(item: any): boolean {\r\n        return !item.ProductID;\r\n    }\r\n\r\n    public hasChanges(): boolean {\r\n        return Boolean(this.deletedItems.length || this.updatedItems.length || this.createdItems.length);\r\n    }\r\n\r\n    public saveChanges(): void {\r\n        if (!this.hasChanges()) {\r\n            return;\r\n        }\r\n\r\n        const completed = [];\r\n        if (this.deletedItems.length) {\r\n            completed.push(this.fetch(REMOVE_ACTION, this.deletedItems));\r\n        }\r\n\r\n        if (this.updatedItems.length) {\r\n            completed.push(this.fetch(UPDATE_ACTION, this.updatedItems));\r\n        }\r\n\r\n        if (this.createdItems.length) {\r\n            completed.push(this.fetch(CREATE_ACTION, this.createdItems));\r\n        }\r\n\r\n        this.reset();\r\n\r\n        zip(...completed).subscribe(() => this.read());\r\n    }\r\n\r\n    public cancelChanges(): void {\r\n        this.reset();\r\n\r\n        this.data = this.originalData;\r\n        this.originalData = cloneData(this.originalData);\r\n        super.next(this.data);\r\n    }\r\n\r\n    public assignValues(target: any, source: any): void {\r\n        Object.assign(target, source);\r\n    }\r\n\r\n    private reset() {\r\n        this.data = [];\r\n        this.deletedItems = [];\r\n        this.updatedItems = [];\r\n        this.createdItems = [];\r\n    }\r\n\r\n    private fetch(action: string = '', data?: any): Observable<any[]> {\r\n        return this.http\r\n            .jsonp(`https://demos.telerik.com/kendo-ui/service/Products/${action}?${this.serializeModels(data)}`, 'callback')\r\n            .pipe(map(res => <any[]>res));\r\n    }\r\n\r\n    private serializeModels(data?: any): string {\r\n        return data ? `&models=${JSON.stringify(data)}` : '';\r\n    }\r\n}\r\n","export class Product {\r\n    public ProductID: number;\r\n    public ProductName = '';\r\n    public Discontinued = false;\r\n    public UnitsInStock: number;\r\n    public UnitPrice = 0;\r\n}\r\n","\r\nimport './polyfills';\r\n\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule, { preserveWhitespaces: true }).then(ref => {\r\n  // Ensure Angular destroys itself on hot reloads.\r\n  if (window['ngRef']) {\r\n    window['ngRef'].destroy();\r\n  }\r\n  window['ngRef'] = ref;\r\n\r\n  // Otherise, log the boot error\r\n}).catch(err => console.error(err));\r\n","\r\n/**\r\n * This file includes polyfills needed by Angular and is loaded before the app.\r\n * You can add your own extra polyfills to this file.\r\n *\r\n * This file is divided into 2 sections:\r\n *   1. Browser polyfills. These are applied before loading ZoneJS and are sorted by browsers.\r\n *   2. Application imports. Files imported after ZoneJS that should be loaded before your main\r\n *      file.\r\n *\r\n * The current setup is for so-called \"evergreen\" browsers; the last versions of browsers that\r\n * automatically update themselves. This includes Safari >= 10, Chrome >= 55 (including Opera),\r\n * Edge >= 13 on the desktop, and iOS 10 and Chrome on mobile.\r\n *\r\n * Learn more in https://angular.io/docs/ts/latest/guide/browser-support.html\r\n */\r\n\r\n/***************************************************************************************************\r\n * BROWSER POLYFILLS\r\n */\r\n\r\n/** IE9, IE10 and IE11 requires all of the following polyfills. **/\r\nimport 'core-js/es6/symbol';\r\nimport 'core-js/es6/object';\r\nimport 'core-js/es6/function';\r\nimport 'core-js/es6/parse-int';\r\nimport 'core-js/es6/parse-float';\r\nimport 'core-js/es6/number';\r\nimport 'core-js/es6/math';\r\nimport 'core-js/es6/string';\r\nimport 'core-js/es6/date';\r\nimport 'core-js/es6/array';\r\nimport 'core-js/es6/regexp';\r\nimport 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\n\r\n/** IE10 and IE11 requires the following for NgClass support on SVG elements */\r\n// import 'classlist.js';  // Run `npm install --save classlist.js`.\r\n\r\n/** IE10 and IE11 requires the following to support `@angular/animation`. */\r\nimport 'web-animations-js';\r\n\r\n\r\n// polyfill for @angular/animations\r\n// https://github.com/angular/angular/issues/24769\r\nif (!Element.prototype.matches) {\r\n    Element.prototype.matches = (<any> Element).prototype.msMatchesSelector;\r\n}\r\n\r\n/** Evergreen browsers require these. **/\r\nimport 'core-js/es6/reflect';\r\nimport 'core-js/es7/reflect';\r\n\r\n\r\n/** ALL Firefox browsers require the following to support `@angular/animation`. **/\r\n// import 'web-animations-js';  // Run `npm install --save web-animations-js`.\r\n\r\n\r\n\r\n/***************************************************************************************************\r\n * Zone JS is required by Angular itself.\r\n */\r\nimport 'zone.js';  // Included with Angular CLI.\r\n\r\n\r\n/***************************************************************************************************\r\n * APPLICATION IMPORTS\r\n */\r\n\r\n/**\r\n * Date, currency, decimal and percent pipes.\r\n * Needed for: All but Chrome, Firefox, Edge, IE11 and Safari 10\r\n */\r\n// import 'intl';  // Run `npm install --save intl`.\r\n"]}